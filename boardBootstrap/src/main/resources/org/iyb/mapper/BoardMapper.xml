<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="org.iyb.mapper.BoardMapper">

  	<insert id="write">
  		insert into board(title,content,writer)
		value(#{title},#{content},#{writer})
  	</insert>
  	<select id="list" resultType="org.iyb.domain.BoardDTO">
  		select*from board
  		<choose><!-- mybatis의 switch문이다. -->
	  	 	<when test="search == null">
		      where 1=1
		    </when>
		    <when test="search == 't'.toString()">
		      where title like concat('%',#{keyword},'%');
		    </when>
		   	<when test="search == 'c'.toString()">
		      where content like concat('%',#{keyword},'%');
		    </when>
		    <when test="search == 'w'.toString()">
		      where writer like concat('%',#{keyword},'%');
		    </when>
		    <when test="search == 'tc'.toString()">
		      where title like concat('%',#{keyword},'%') 
		      or content like concat('%',#{keyword},'%');
		    </when>
		    <otherwise>
		      where title like concat('%',#{keyword},'%') 
		      or content like concat('%',#{keyword},'%') 
		      or writer like concat('%',#{keyword},'%');
		    </otherwise>
		</choose>
  	</select>
  	<select id="detail" resultType="org.iyb.domain.BoardDTO">
  		select*from board where bno=#{bno}
  	</select>
  	<update id="modify">
  		update board
		set title=#{title}, 
			content=#{content}, 
			regdate=now()
		where bno=#{bno};
  	</update>
  	<delete id="remove">
  		delete from board where bno=#{bno};
  	</delete>
</mapper>